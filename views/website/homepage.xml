<odoo>
    <template id="custom_homepage" name="Custom Homepage">
        <t t-call="website.layout">
            <main class="container pt-4">
                <div class="row align-items-start">
                    <!-- Main content -->
                    <div id="main_content" class="col-lg-8 col-12">
                        <h1>Welcome to ROMA User Portal</h1>
                        <div class="mb-5">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">
                                    <i class="fa fa-calendar me-2 text-muted"/>
                                    Upcoming Events
                                </h5>
                                <a href="/event" class="small">View all</a>
                            </div>

                            <t t-if="events">
                                <div class="list-group d-flex flex-column gap-3">
                                    <t t-foreach="events" t-as="event">
                                        <a t-att-href="'/event/%s' % event.id"
                                        class="list-group-item list-group-item-action">

                                            <div class="d-flex">

                                                <!-- Event Image -->
                                                <!-- <t t-if="event.badge_image"> -->
                                                <!--     <img t-att-src="'/web/image/event.event/%s/badge_image' % event.id" -->
                                                <!--         class="me-3 rounded" -->
                                                <!--         style="width: 80px; height: 80px; object-fit: cover;"/> -->
                                                <!-- </t> -->

                                                <!-- Event Content -->
                                                <div class="flex-grow-1">
                                                    <strong t-esc="event.name"/>

                                                    <!-- Short Description -->
                                                    <t t-if="event.subtitle">
                                                        <p class="mb-1 small text-muted"
                                                        t-esc="event.subtitle"/>
                                                    </t>

                                                    <t t-if="event.description">
                                                        <p class="mb-1 small text-muted"
                                                            t-esc="(event.description or '')[:250] + ('...' if event.description and len(event.description) > 250 else '')"/>
                                                    </t>

                                                    <t t-if="event.event_type_id">
                                                        <div class="small text-muted">
                                                            <i class="fa fa-tags me-1"/>
                                                            <span t-esc="event.event_type_id.name"/>
                                                        </div>
                                                    </t>

                                                    <!-- Date -->
                                                    <div class="small text-muted">
                                                        <i class="fa fa-clock-o me-1"/>
                                                        <span t-field="event.date_begin"/>
                                                    </div>

                                                    <t t-if="event.address_id">
                                                        <div class="small text-muted">
                                                            <i class="fa fa-map-marker me-1"/>
                                                            <span t-esc="event.address_id.name"/>
                                                        </div>
                                                    </t>
                                                </div>

                                            </div>
                                        </a>
                                    </t>
                                </div>
                            </t>

                            <t t-if="not events">
                                <p class="text-muted small">No upcoming events.</p>
                            </t>
                        </div>

                        <!-- Latest Blog Posts -->
                        <div>
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">
                                    <i class="fa fa-file-text-o me-2 text-muted"/>
                                    Latest Posts
                                </h5>
                                <a href="/blog" class="small">View all</a>
                            </div>

                            <t t-if="blogs">
                                <div class="list-group d-flex flex-column gap-3">
                                    <t t-foreach="blogs" t-as="blog">
                                        <a t-att-href="blog.website_url"
                                        class="list-group-item list-group-item-action">
                                            <strong t-esc="blog.name"/>
                                            <!-- <t t-if="blog.teaser"> -->
                                            <!--     <p class="mb-1 small text-muted" -->
                                            <!--         t-esc="(event.teaser or '')[:250] + ('...' if event.teaser and len(event.teaser) > 250 else '')"/> -->
                                            <!-- </t> -->
                                            <div class="small text-muted">
                                                <span t-field="blog.post_date"/>
                                            </div>
                                        </a>
                                    </t>
                                </div>
                            </t>

                            <t t-if="not blogs">
                                <p class="text-muted small">No blog posts available.</p>
                            </t>
                        </div>

                    </div>

                    <div class="col-lg-4 col-12 position-sticky top-0">
                        <div class="card shadow-sm p-3 d-flex flex-column gap-1">
                            <div>
                                <h4>Portal Menu</h4>
                                <hr/>
                            </div>

                            <!-- Events -->
                            <a href="/event" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-calendar me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Events</h5>
                                            <p class="mb-1 small text-muted">Follow the current events</p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <!-- Policies and Guidelines -->
                            <a href="/blog" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-file-text-o me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Policies and Guidelines</h5>
                                            <p class="mb-1 small text-muted">Follow our policies and guidelines</p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <!-- Forms -->
                            <a href="/forms" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-clipboard me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Forms</h5>
                                            <p class="mb-1 small text-muted">File forms for requests or reservations</p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <!-- Invoices -->
                            <a href="/my/invoices?filterby=invoices" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <!-- <img src="/account/static/src/img/Bill.svg" class="me-3 img-fluid" style="max-width:30px;"/> -->
                                        <i class="fa fa-money me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Invoices</h5>
                                            <p class="mb-1 small text-muted">Follow, download or pay your invoices</p>
                                        </div>
                                    </div>
                                    <span class="badge bg-primary"><t t-out="invoice_count"/></span>
                                </div>
                            </a>

                            <!-- Tickets -->
                            <!-- <a href="/?page=tickets" class="card p-2 text-decoration-none"> -->
                            <a href="/my/tickets" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-ticket me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Helpdesk Tickets</h5>
                                            <p class="mb-1 small text-muted">Follow all your helpdesk tickets</p>
                                        </div>
                                    </div>
                                    <span class="badge bg-info"><t t-out="ticket_count"/></span>
                                </div>
                            </a>

                            <!-- Signatures -->
                            <a href="/my/signatures" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-pencil me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Signatures</h5>
                                            <p class="mb-1 small text-muted">Review and sign your documents</p>
                                        </div>
                                    </div>
                                    <span class="badge bg-warning"><t t-out="signature_count"/></span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </main>
        </t>
    </template>
</odoo>
