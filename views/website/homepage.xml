<odoo>
    <template id="custom_homepage" name="Custom Homepage">
        <t t-call="website.layout">
            <main class="container pt-4">
                <div class="row align-items-start">
                    <!-- Main content -->
                    <div id="main_content" class="col-lg-8 col-12 pb-5">
                        <h1>Welcome to ROMA User Portal</h1>
                        <t t-if="not signup_done">
                            <div class="alert alert-warning mb-4" role="alert">
                                <strong>Action Required:</strong>
                                Please complete your account details.
                                <a href="/my/update-details" class="alert-link">
                                    Click here to update your account.
                                </a>
                            </div>
                        </t>
                        <div class="mb-5">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">
                                    <i class="fa fa-calendar me-2 text-muted"/>
                                    Upcoming Events
                                </h5>
                                <a href="/event" class="small">View all</a>
                            </div>

                            <t t-if="events">
                                <div class="list-group d-flex flex-column gap-3">
                                    <t t-foreach="events" t-as="event">
                                    <a t-att-href="'/event/%s' % event.id"
                                       class="text-decoration-none">

                                        <div class="card mb-2 shadow-sm border-0 event-card">
                                            <div class="row g-0 align-items-center">

                                                <!-- Event Image -->
                                                <t t-if="event.badge_image">
                                                    <img t-att-src="'/web/image/event.event/%s/badge_image' % event.id"/>
                                                </t>
                                                <t t-else="">
                                                    <div class="bg-light d-flex align-items-center justify-content-center"
                                                         style="width:110px;height:110px;">
                                                        <i class="fa fa-calendar fa-2x text-muted"/>
                                                    </div>
                                                </t>

                                                <!-- Event Content -->
                                                <div class="col">
                                                    <div class="card-body py-2">

                                                        <!-- Title -->
                                                        <h6 class="card-title mb-1">
                                                            <strong t-esc="event.name"/>
                                                        </h6>

                                                        <!-- Subtitle -->
                                                        <t t-if="event.subtitle">
                                                            <div class="text-muted small mb-1"
                                                                 t-esc="event.subtitle"/>
                                                        </t>

                                                        <!-- Description -->
                                                        <!-- <t t-if="event.description">
                                                            <p class="small text-muted mb-2"
                                                               t-esc="(event.description or '')[:160] + ('...' if event.description and len(event.description) > 160 else '')"/>
                                                        </t> -->

                                                        <!-- Meta -->
                                                        <div class="d-flex flex-wrap gap-3 small text-muted">

                                                            <t t-if="event.date_begin">
                                                                <span>
                                                                    <i class="fa fa-clock-o me-1"/>
                                                                    <span t-field="event.date_begin"/>
                                                                </span>
                                                            </t>

                                                            <t t-if="event.address_id">
                                                                <span>
                                                                    <i class="fa fa-map-marker me-1"/>
                                                                    <span t-esc="event.address_id.name"/>
                                                                </span>
                                                            </t>

                                                        </div>

                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </a>
                                    </t>
                                </div>
                            </t>

                            <t t-if="not events">
                                <p class="text-muted small">No upcoming events.</p>
                            </t>
                        </div>

                        <!-- Latest Blog Posts -->
                        <div>
                            <!-- Header -->
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">
                                    <i class="fa fa-file-text-o me-2 text-muted"/>
                                    Latest Posts
                                </h5>
                                <a href="/blog" class="small text-decoration-none">View all</a>
                            </div>

                            <t t-if="blogs">
                                <div class="d-flex flex-column gap-3">

                                    <t t-foreach="blogs" t-as="blog">
                                        <a t-att-href="blog.website_url"
                                           class="text-decoration-none">

                                            <div class="card border-0 shadow-sm blog-card">
                                                <div class="row g-0 align-items-center">

                                                    <!-- Blog Image -->
                                                    <div class="col-auto">
                                                        <t t-if="blog.cover_properties">
                                                            <img t-att-src="'/web/image/blog.post/%s/cover_properties' % blog.id"
                                                                 style="width: 100px; height: 100px; object-fit: cover;"
                                                                 class="rounded-start"/>
                                                        </t>
                                                        <t t-else="">
                                                            <div class="bg-light d-flex align-items-center justify-content-center"
                                                                 style="width:100px;height:100px;">
                                                                <i class="fa fa-file-text-o fa-2x text-muted"/>
                                                            </div>
                                                        </t>
                                                    </div>

                                                    <!-- Content -->
                                                    <div class="col">
                                                        <div class="card-body py-2">

                                                            <!-- Title -->
                                                            <h6 class="mb-1">
                                                                <strong t-esc="blog.name"/>
                                                            </h6>

                                                            <!-- Teaser -->
                                                            <t t-if="blog.teaser">
                                                                <p class="small text-muted mb-2"
                                                                   t-esc="(blog.teaser or '')[:140] + ('...' if blog.teaser and len(blog.teaser) > 140 else '')"/>
                                                            </t>

                                                            <!-- Date -->
                                                            <div class="small text-muted">
                                                                <i class="fa fa-calendar me-1"/>
                                                                <span t-field="blog.post_date"/>
                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        </a>
                                    </t>

                                </div>
                            </t>

                            <t t-if="not blogs">
                                <div class="text-center py-4 text-muted small">
                                    <i class="fa fa-file-text-o fa-2x mb-2"/>
                                    <div>No blog posts available.</div>
                                </div>
                            </t>

                        </div>


                    </div>

                    <div class="col-lg-4 col-12 position-sticky top-0">
                        <div class="card shadow-sm p-3 d-flex flex-column gap-1">
                            <div>
                                <h4>Portal Menu</h4>
                                <hr/>
                            </div>

                            <!-- Events -->
                            <a href="/event" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-calendar me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Events</h5>
                                            <p class="mb-1 small text-muted">Follow the current events</p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <!-- Policies and Guidelines -->
                            <a href="/blog" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-file-text-o me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Policies and Guidelines</h5>
                                            <p class="mb-1 small text-muted">Follow our policies and guidelines</p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <!-- Forms -->
                            <a href="/forms" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-clipboard me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Forms</h5>
                                            <p class="mb-1 small text-muted">File forms for requests or reservations</p>
                                        </div>
                                    </div>
                                </div>
                            </a>

                            <!-- Invoices -->
                            <a href="/my/invoices?filterby=invoices" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <!-- <img src="/account/static/src/img/Bill.svg" class="me-3 img-fluid" style="max-width:30px;"/> -->
                                        <i class="fa fa-money me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Invoices</h5>
                                            <p class="mb-1 small text-muted">Follow, download or pay your invoices</p>
                                        </div>
                                    </div>
                                    <span class="badge bg-primary"><t t-out="invoice_count"/></span>
                                </div>
                            </a>

                            <!-- Tickets -->
                            <!-- <a href="/?page=tickets" class="card p-2 text-decoration-none"> -->
                            <a href="/my/tickets" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-ticket me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Helpdesk Tickets</h5>
                                            <p class="mb-1 small text-muted">Follow all your helpdesk tickets</p>
                                        </div>
                                    </div>
                                    <span class="badge bg-info"><t t-out="ticket_count"/></span>
                                </div>
                            </a>

                            <!-- Signatures -->
                            <a href="/my/signatures" class="card p-2 text-decoration-none">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-pencil me-3 text-muted" style="font-size: 24px; padding: 5px;"></i>
                                        <div>
                                            <h5 class="mb-1">Signatures</h5>
                                            <p class="mb-1 small text-muted">Review and sign your documents</p>
                                        </div>
                                    </div>
                                    <span class="badge bg-warning"><t t-out="signature_count"/></span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </main>
        </t>
    </template>
</odoo>
